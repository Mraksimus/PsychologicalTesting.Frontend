import React from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import {
    Container,
    Stack,
    Card,
    Group,
    Button,
    Title,
    Text,
    Badge,
    RingProgress,
} from '@mantine/core';
import Header from '../components/Header';

interface AnalysisResult {
    resultLevel: 'low' | 'medium' | 'high';
    percentile: number;
    mainFindings: string;
    recommendations: string[];
    suggestedActions: string[];
}

const analysisTemplates: { [key: string]: AnalysisResult } = {
    '–¢–µ—Å—Ç –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞': {
        resultLevel: 'medium',
        percentile: 55,
        mainFindings: '–í—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –º–µ—Ä—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è.',
        recommendations: [
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (30 –º–∏–Ω –≤ –¥–µ–Ω—å)',
            '–ú–µ–¥–∏—Ç–∏—Ä—É–π—Ç–µ –Ω–µ –º–µ–Ω–µ–µ 10 –º–∏–Ω—É—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ',
            '–û–±–µ—Å–ø–µ—á—å—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–æ–Ω (7-8 —á–∞—Å–æ–≤)',
            '–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ—Ñ–µ–∏–Ω –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏',
            '–ü—Ä–æ–≤–æ–¥–∏—Ç–µ –≤—Ä–µ–º—è —Å –±–ª–∏–∑–∫–∏–º–∏ –ª—é–¥—å–º–∏'
        ],
        suggestedActions: [
            '‚Üí –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –π–æ–≥—É –∏–ª–∏ –ø–∏–ª–∞—Ç–µ—Å',
            '‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏',
            '‚Üí –°–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞',
            '‚Üí –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø—Å–∏—Ö–æ–ª–æ–≥–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç': {
        resultLevel: 'high',
        percentile: 72,
        mainFindings: '–í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –≤—ã—Å–æ–∫–∏–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º. –≠—Ç–æ –≤–∞—à–∞ —Å–∏–ª–∞ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.',
        recommendations: [
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –Ω–∞–≤—ã–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª—É—à–∞–Ω–∏—è',
            '–†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ —Å–∞–º–æ—Å–æ–∑–Ω–∞–Ω–∏–µ–º –∏ —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —ç–º–ø–∞—Ç–∏—é –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏',
            '–ò–∑—É—á–∞–π—Ç–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—é —ç–º–æ—Ü–∏–π',
            '–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö'
        ],
        suggestedActions: [
            '‚Üí –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏ –ø–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É',
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏',
            '‚Üí –ü—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –º–µ–¥–∏—Ç–∞—Ü–∏—é –ª—é–±—è—â–µ–π –¥–æ–±—Ä–æ—Ç—ã',
            '‚Üí –ù–∞–π—Ç–∏ –º–µ–Ω—Ç–æ—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞–≤—ã–∫–æ–≤'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º': {
        resultLevel: 'medium',
        percentile: 60,
        mainFindings: '–í–∞—à–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ä–µ–¥–Ω–µ–º —É—Ä–æ–≤–Ω–µ. –†–∞–∑–≤–∏—Ç–∏–µ –≥–∏–±–∫–æ—Å—Ç–∏ –ø–æ–º–æ–∂–µ—Ç –ª—É—á—à–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è.',
        recommendations: [
            '–ö—É–ª—å—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º',
            '–£—á–∏—Ç–µ—Å—å –≤–∏–¥–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –Ω–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö',
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –ø–ª–∞–Ω B –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≥–∏–±–∫–æ—Å—Ç—å –≤ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º',
            '–û–±—â–∞–π—Ç–µ—Å—å —Å –ª—é–¥—å–º–∏, —É—Å–ø–µ—à–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É—é—â–∏–º–∏—Å—è'
        ],
        suggestedActions: [
            '‚Üí –ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Ö–æ–±–±–∏',
            '‚Üí –ò–∑–º–µ–Ω–∏—Ç–µ 3 –ø—Ä–∏–≤—ã—á–Ω—ã–µ —Ä—É—Ç–∏–Ω—ã',
            '‚Üí –ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é',
            '‚Üí –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å': {
        resultLevel: 'low',
        percentile: 45,
        mainFindings: '–í–∞—à —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—ã—à–µ–Ω. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.',
        recommendations: [
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ',
            '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏',
            '–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ—Ñ–µ–∏–Ω –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏',
            '–ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏',
            '–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ —Ç—Ä–µ–≤–æ–≥–∏'
        ],
        suggestedActions: [
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫—É—é —Ç–µ—Ä–∞–ø–∏—é',
            '‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–≤–æ–≥–æ–π',
            '‚Üí –ó–∞–Ω–∏–º–∞—Ç—å—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —Ä–µ–≥—É–ª—è—Ä–Ω–æ',
            '‚Üí –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ': {
        resultLevel: 'high',
        percentile: 70,
        mainFindings: '–í—ã —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏.',
        recommendations: [
            '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –±–∞–ª–∞–Ω—Å —Ä–∞–±–æ—Ç–∞-–æ—Ç–¥—ã—Ö',
            '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –æ—Ç–ø—É—Å–∫',
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã –≤–Ω–µ —Ä–∞–±–æ—Ç—ã',
            '–û–±—â–∞–π—Ç–µ—Å—å —Å –∫–æ–ª–ª–µ–≥–∞–º–∏ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ',
            '–¶–µ–Ω–∏—Ç–µ —Å–≤–æ–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è'
        ],
        suggestedActions: [
            '‚Üí –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏',
            '‚Üí –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—É—Å–∫ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Å—è—Ü—ã',
            '‚Üí –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏',
            '‚Üí –£–∫—Ä–µ–ø–ª—è—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –∫–æ–ª–ª–µ–≥–∞–º–∏'
        ]
    },
    '–¢–µ—Å—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤': {
        resultLevel: 'medium',
        percentile: 58,
        mainFindings: '–í–∞—à–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–≤–∏—Ç–∏—è. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.',
        recommendations: [
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –Ω–∞–≤—ã–∫ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª—É—à–∞–Ω–∏—è',
            '–†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ —è—Å–Ω–æ—Å—Ç—å—é –∏–∑–ª–æ–∂–µ–Ω–∏—è',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —ç–º–ø–∞—Ç–∏—é –≤ –æ–±—â–µ–Ω–∏–∏',
            '–£—á–∏—Ç–µ—Å—å —á–∏—Ç–∞—Ç—å –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã',
            '–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±—â–∞–π—Ç–µ—Å—å –≤ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ'
        ],
        suggestedActions: [
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ –ø—É–±–ª–∏—á–Ω—ã–º –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è–º',
            '‚Üí –ó–≤–æ–Ω–∏—Ç—å –¥—Ä—É–∑—å—è–º —á–∞—â–µ',
            '‚Üí –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª—É–±—É –∏–ª–∏ –≥—Ä—É–ø–ø–µ',
            '‚Üí –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏ –æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É': {
        resultLevel: 'medium',
        percentile: 62,
        mainFindings: '–£ –≤–∞—Å –∑–¥–æ—Ä–æ–≤–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞. –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.',
        recommendations: [
            '–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ –ø–æ–±–µ–¥',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ —Å–∞–º–æ–≥–æ–≤–æ—Ä–µ–Ω–∏–µ',
            '–ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã —Å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å—é',
            '–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ü–µ–ª–∏',
            '–û–∫—Ä—É–∂–∞–π—Ç–µ —Å–µ–±—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º–∏ –ª—é–¥—å–º–∏'
        ],
        suggestedActions: [
            '‚Üí –ó–∞–≤–µ—Å—Ç–∏ –¥–Ω–µ–≤–Ω–∏–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π',
            '‚Üí –ü—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å —Å–∞–º–æ–∫–æ–º–ø–∞—Å—Å–∏—é',
            '‚Üí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –¥–æ—Å—Ç–∏–≥–∞—Ç—å –º–∞–ª—ã—Ö —Ü–µ–ª–µ–π',
            '‚Üí –ü–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ –ø—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é': {
        resultLevel: 'medium',
        percentile: 65,
        mainFindings: '–í—ã –∏–º–µ–µ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –∫–∞—Ä—å–µ—Ä–Ω–æ–º –ø—É—Ç–∏. –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ü–µ–ª–µ–π.',
        recommendations: [
            '–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π',
            '–ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏',
            '–û–±—â–∞–π—Ç–µ—Å—å —Å —É—Å–ø–µ—à–Ω—ã–º–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º–∏',
            '–ü–æ–ª—É—á–∞–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
            '–°–æ–∑–¥–∞–π—Ç–µ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è'
        ],
        suggestedActions: [
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞',
            '‚Üí –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç—ã –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ',
            '‚Üí –í–∑—è—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é —É –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤',
            '‚Üí –†–∞–∑—Ä–∞–±–æ—Ç–∏—Ç—å 5-–ª–µ—Ç–Ω–∏–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å': {
        resultLevel: 'high',
        percentile: 75,
        mainFindings: '–í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –≤—ã—Å–æ–∫–æ–π –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª.',
        recommendations: [
            '–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –Ω–æ–≤—ã–º–∏ –∏–¥–µ—è–º–∏ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞',
            '–ò—â–∏—Ç–µ –Ω–µ–æ–±—ã—á–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –±—Ä–µ–π–Ω—Å—Ç–æ—Ä–º–∏–Ω–≥ —Å –¥—Ä—É–≥–∏–º–∏',
            '–ü–æ–≥—Ä—É–∂–∞–π—Ç–µ—Å—å –≤ —Ä–∞–∑–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –∑–Ω–∞–Ω–∏—è',
            '–í—ã–¥–µ–ª—è–π—Ç–µ –≤—Ä–µ–º—è –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏–π'
        ],
        suggestedActions: [
            '‚Üí –ó–∞–Ω—è—Ç—å—Å—è –Ω–æ–≤—ã–º —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º —Ö–æ–±–±–∏',
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏',
            '‚Üí –°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ (—Ä–∏—Å–æ–≤–∞—Ç—å, –ø–∏—Å–∞—Ç—å)',
            '‚Üí –ò–∑—É—á–∏—Ç—å –º–µ—Ç–æ–¥–∏–∫–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å—Ç—Ä–µ—Å—Å—É': {
        resultLevel: 'high',
        percentile: 78,
        mainFindings: '–í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –≤—ã—Å–æ–∫–æ–π —Å—Ç—Ä–µ—Å—Å–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å—é. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã.',
        recommendations: [
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
            '–£–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏',
            '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –º–µ–¥–∏—Ç–∞—Ü–∏—é –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å',
            '–ß–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏',
            '–ù–∞–π–¥–∏—Ç–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏ –∏ –æ—Ç–¥—ã—Ö–∞'
        ],
        suggestedActions: [
            '‚Üí –ù–∞—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π',
            '‚Üí –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –π–æ–≥—É –∏–ª–∏ –º–µ–¥–∏—Ç–∞—Ü–∏—é',
            '‚Üí –†–∞–∑–≤–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ',
            '‚Üí –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—É –ø–æ —Å—Ç—Ä–µ—Å—Å—É'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞': {
        resultLevel: 'medium',
        percentile: 68,
        mainFindings: '–£ –≤–∞—Å —Ö–æ—Ä–æ—à–∏–µ –ª–∏–¥–µ—Ä—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—è.',
        recommendations: [
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –Ω–∞–≤—ã–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π',
            '–†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π –∫–æ–º–∞–Ω–¥—ã',
            '–£—á–∏—Ç–µ—Å—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã',
            '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç',
            '–ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –∑–Ω–∞–Ω–∏—è –∏ –æ–ø—ã—Ç –¥—Ä—É–≥–∏–º'
        ],
        suggestedActions: [
            '‚Üí –ü–æ—Å–µ—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ä–∞–∑–≤–∏—Ç–∏—è –ª–∏–¥–µ—Ä—Å—Ç–≤–∞',
            '‚Üí –ù–∞–π—Ç–∏ –º–µ–Ω—Ç–æ—Ä–∞-–ª–∏–¥–µ—Ä–∞',
            '‚Üí –í–∑—è—Ç—å —Ä—É–∫–æ–≤–æ–¥—è—â—É—é —Ä–æ–ª—å –≤ –ø—Ä–æ–µ–∫—Ç–µ',
            '‚Üí –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏ –æ –ª–∏–¥–µ—Ä—Å—Ç–≤–µ'
        ]
    },
    '–¢–µ—Å—Ç –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ': {
        resultLevel: 'low',
        percentile: 40,
        mainFindings: '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –Ω–∞ –ø—É—Ç–∏ –∫ –≤—ã–≥–æ—Ä–∞–Ω–∏—é. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.',
        recommendations: [
            '–ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–±–æ—á—É—é –Ω–∞–≥—Ä—É–∑–∫—É',
            '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –æ—Ç–¥—ã—Ö–æ–º',
            '–ó–∞–π–º–∏—Ç–µ—Å—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–µ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é',
            '–£–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏',
            '–ó–∞–π–º–∏—Ç–µ—Å—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –ø—Ä–∏–Ω–æ—Å—è—â–µ–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ'
        ],
        suggestedActions: [
            '‚Üí –í–æ–∑—å–º–∏—Ç–µ –ø–µ—Ä–µ—Ä—ã–≤ –Ω–∞ —Ä–∞–±–æ—Ç–µ',
            '‚Üí –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç—É',
            '‚Üí –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–º–µ–Ω—É –¥–æ–ª–∂–Ω–æ—Å—Ç–∏',
            '‚Üí –†–∞–∑—Ä–∞–±–æ—Ç–∏—Ç—å –ø–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è'
        ]
    }
};

const ResultsPage: React.FC = () => {
    const location = useLocation();
    const navigate = useNavigate();
    const resultsData = location.state;

    if (!resultsData) {
        return (
            <Container>
                <Text>–î–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</Text>
                <Button onClick={() => navigate('/tests')}>–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ—Å—Ç–∞–º</Button>
            </Container>
        );
    }

    const { testId, testTitle, category, percentile } = resultsData;
    const analysis = analysisTemplates[testTitle] || analysisTemplates['–¢–µ—Å—Ç –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞'];

    const getRiskColor = () => {
        if (analysis.resultLevel === 'high') return 'teal';
        if (analysis.resultLevel === 'medium') return 'yellow';
        return 'red';
    };

    const getRiskLabel = () => {
        if (analysis.resultLevel === 'high') return 'üü¢ –í—ã—Å–æ–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç';
        if (analysis.resultLevel === 'medium') return 'üü° –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç';
        return 'üî¥ –ù–∏–∑–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç';
    };

    return (
        <>
            <Header />
            <Container size="xl" style={{ padding: '40px 0' }}>

                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                <div style={{ textAlign: 'center', color: 'white', marginBottom: '50px' }}>
                    <Title order={1} style={{ color: 'white', fontSize: '2.5rem', marginBottom: '10px' }}>
                        üìä –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    </Title>
                    <Text size="lg" style={{ color: 'rgba(255,255,255,0.8)' }}>
                         {testTitle}
                    </Text>
                </div>

                {/* –†–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–µ–º */}
                <Card
                    shadow="md"
                    p="xl"
                    mb="xl"
                    style={{
                        background: 'rgba(255,255,255,0.95)',
                        borderRadius: '16px',
                        border: '1px solid #e8e8f0'
                    }}
                >
                    <Group justify="space-between" align="flex-start">
                        <div>
                            <Title order={2} size="h2" style={{ color: '#333' }}>{getRiskLabel()}</Title>
                            <Badge size="lg" color={getRiskColor()} mt="md">
                                {category}
                            </Badge>
                            <Text size="md" style={{ color: '#666', marginTop: '15px' }}>
                                –ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å: <strong style={{ color: '#333' }}>{percentile}%</strong>
                            </Text>
                        </div>

                        <RingProgress
                            sections={[{ value: percentile, color: getRiskColor() }]}
                            label={
                                <div style={{ textAlign: 'center' }}>
                                    <Text size="xl" fw={700} style={{ color: '#333' }}>{percentile}%</Text>
                                    <Text size="xs" style={{ color: '#666' }}>–ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å</Text>
                                </div>
                            }
                            thickness={8}
                            size={140}
                        />
                    </Group>
                </Card>

                {/* AI –ê–Ω–∞–ª–∏–∑ */}
                <Card
                    shadow="md"
                    p="xl"
                    mb="xl"
                    style={{
                        background: 'rgba(255,255,255,0.95)',
                        borderRadius: '16px',
                        border: '1px solid #e8e8f0',
                        borderLeft: '4px solid #667eea'
                    }}
                >
                    <Group mb="lg">
                        <span style={{ fontSize: '1.4rem' }}>üîµ</span>
                        <Title order={3} style={{ margin: 0, color: '#333' }}>AI –ê–Ω–∞–ª–∏–∑</Title>
                    </Group>
                    <Text style={{ color: '#333', lineHeight: 1.8, fontSize: '15px' }}>
                        {analysis.mainFindings}
                    </Text>
                </Card>

                {/* –ö–Ω–æ–ø–∫–∏ */}
                <Card
                    shadow="md"
                    p="xl"
                    style={{
                        background: 'rgba(255,255,255,0.95)',
                        borderRadius: '16px',
                        border: '1px solid #e8e8f0'
                    }}
                >
                    <Stack gap="md">
                        <Group justify="center" grow>
                            <Button
                                size="md"
                                variant="light"
                                onClick={() => navigate(`/test/${testId}`)}
                            >
                                üîÑ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
                            </Button>
                            <Button
                                size="md"
                                gradient={{ from: 'blue', to: 'cyan' }}
                                onClick={() => navigate('/tests')}
                            >
                                üìã –ö –¥—Ä—É–≥–∏–º —Ç–µ—Å—Ç–∞–º
                            </Button>
                        </Group>

                        <Text size="xs" ta="center" style={{ color: '#999', marginTop: '10px' }}>
                            üíæ –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
                        </Text>
                    </Stack>
                </Card>
            </Container>
        </>
    );
};

export default ResultsPage;